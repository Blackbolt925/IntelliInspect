<app-progress-navbar [currentStep]="3"></app-progress-navbar>

<!-- Show upload UI only when there's no metadata yet -->
<div *ngIf="!metadata">
  <h2>Upload Dataset</h2>

  <div class="upload-area"
       (drop)="onDrop($event)"
       (dragover)="onDragOver($event)">
    <p>Click to select a CSV file or drag and drop</p>
    <input type="file" accept=".csv" (change)="onFileSelected($event)" hidden #fileInput />
    <button mat-raised-button color="primary" (click)="fileInput.click()">Choose File</button>
  </div>
</div>

<!-- Show metadata only when available -->
<div *ngIf="metadata" class="meta-summary">
  <mat-card class="card">Records <br /><strong>{{ metadata.totalRecords }}</strong></mat-card>
  <mat-card class="card">Columns <br /><strong>{{ metadata.totalColumns }}</strong></mat-card>
  <mat-card class="card">Pass Rate <br /><strong>{{ metadata.passRate }}%</strong></mat-card>
  <mat-card class="card">Date Range <br />
    <strong>{{ metadata.dateStart }}</strong> to <strong>{{ metadata.dateEnd }}</strong>
  </mat-card>

  <button mat-raised-button color="accent" class="next-btn" (click)="proceed()">Next</button>
</div>

<!-- Show error if any -->
<div *ngIf="error" class="error">{{ error }}</div>